<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>End-To-End Use Case | XMPro </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="End-To-End Use Case | XMPro ">
      <meta name="description" content="XMPro official documentation - Learn how to use XMPro&#39;s intelligent digital twin suite for real-time operational intelligence and automated decision-making.">
      
      <link rel="icon" href="../../images/favicon.png">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://xmpro.visualstudio.com/XMPro%20Development/_git/xmpro-development?path=docs/src/getting-started/end-to-end-use-case.md&amp;version=GB21409-cherry-pick-to-release-4.5.3&amp;line=1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo-light.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="end-to-end-use-case">End-To-End Use Case</h1>

<div class="NOTE">
<h5>Note</h5>
<p>This Use Case assumes the XMPro platform is installed and configured, or you are using the Free Trial that has everything set up for you.</p>
</div>
<p>This step-by-step tutorial is meant to be an introduction to using the XMPro platform. Completing it will give you a solid foundation to understand the more advanced concepts and detailed how-to guides. This tutorial will explain how to create and design a Data Stream, configure Stream Objects to ingest, analyze, transform, and perform actions on data. You will also learn how to set up a Recommendation to generate alerts based on rule logic, create and design an App, create Data Sources and Connections, and configure a simple Data Grid and Chart.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>Please note that the XMPro platform requires third-party cookies to be enabled on your browser.</p>
</div>
<h2 id="use-case">Use Case</h2>
<p>Let's assume there is a power plant that uses a heat exchanger to keep the turbine cool and at the optimum temperature. The heat exchanger circulates water between the cooling tower and the heat exchanger to dissipate heat. To keep a proper circulation of liquid, there are three pumps [A, B, C] installed. Each Pump has a sensor that provides live data for Flow Rate (L/m) and Temperature (°C) using MQTT.</p>
<p>Unless the Pump is under maintenance the Flow Rate should be above 15000 L/m and Water temperature should be below 130°C.</p>
<p>Engineers should be alerted if the average flow rate falls below 250 L/s. If the average temperature starts to rise above 130°C then a critical level alert should be raised.</p>
<p>Engineers should be provided a view to check the history of pump telemetry, maintenance records, and reservoir level to enable them to take necessary action.</p>
<h2 id="1-design-data-streams-with-real-time-data-sources">1. Design Data Streams with Real-Time Data Sources</h2>
<p>The Use Case requires that we gather the Flow Rate and Temperature data from three pumps constantly, and pass it on to be analyzed and have actions performed on the data. We will achieve this with the use of Data Streams. A Data Stream is a visual representation of a flow of data. It is created through the Data Stream Designer.</p>
<p>To access the Data Stream Designer, log into your XMPro Account and press the button in the top-left corner of the screen and click on the Data Stream Designer item.</p>
<p><img src="../images/image-283.png" alt=""></p>
<p>A Data Stream has four components:</p>
<ol>
<li>Ingesting data through Listener Agents</li>
<li>Contextualizing sensor data/telemetry through Context Provider Agents</li>
<li>Analyzing and transforming data through Transformation and AI Agents</li>
<li>Performing actions or outputting data to other integrations through Recommendation and Action Agents</li>
</ol>
<p>We will follow those four steps below.</p>
<h3 id="read--wrangle-live-and-context-data">Read &amp; Wrangle Live and Context Data</h3>
<p>In this section, we will simulate reading data from pump sensors and a metadata store, and combine the data together into a single flow.</p>
<div class="NOTE">
<h5>Note</h5>
<p>See the <a href="../concepts/data-stream/index.html">Data Stream Concept article</a> for more information on Data Streams.</p>
</div>
<p>To begin, we will need to create a new Data Stream. To create a Data Stream, follow the steps below:</p>
<ol>
<li>Open the <em>New Data Stream</em> page from the left-hand menu.</li>
<li>Give the Data Stream a name. For example, &quot;Pump Condition Monitoring&quot;</li>
<li>Select the Type &quot;Streaming&quot;. Data Streams of the Streaming type will run polling Agents at a set interval, for instance, every 10 seconds, whereas Recurrent Data Streams run on a customizable schedule, for instance, once a day at 12am. The recurring type only applies to polling-based Stream Objects, which we won't use in this example.</li>
<li>Select the category under which the Data Stream is to be added.</li>
<li>Feel free to load a suitable icon. If you do not, the default icon will be used. Sample icons can be found in the <a href="../resources/icon-library.html">Icon Library</a>.</li>
<li>Select a collection that will be used to publish Data Stream.</li>
<li>Enter a description to best describe the Data Stream.</li>
<li>Click on &quot;Save&quot;.</li>
</ol>
<p><img src="../images/image-148.png" alt=""></p>
<p>In a production environment, Data Streams would integrate with external data emitters through Agents like OSIsoft PI or MQTT Listeners. However, for the sake of keeping the example simple, we won't be using any Agents that require an environment to be set up. Instead, we will be simulating the data with the <a href="https://xmpro.gitbook.io/event-simulator/">Event Simulator</a>, <a href="https://xmpro.gitbook.io/calculated-field/">Calculated Field</a>, and <a href="https://xmpro.gitbook.io/csv/">CSV Context Provider</a> Agents.</p>
<p>To simulate the telemetry from the pumps, follow the steps below:</p>
<p>Drag into the canvas one of each of the following Agents:</p>
<ul>
<li><a href="https://xmpro.gitbook.io/event-simulator/">Event Simulator</a> (Listener)</li>
<li><a href="https://xmpro.gitbook.io/calculated-field/">Calculated Field</a> (Transformation)</li>
<li><a href="https://xmpro.gitbook.io/csv/">CSV</a> (Context Provider)</li>
<li><a href="https://xmpro.gitbook.io/join/">Join</a> (Transformation)</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>Refer to <a href="../how-tos/agents/manage-agents.html#adding-an-agent">How to Upload an Agent to Data Stream Designer</a> if you are not able to find the Agents in the toolbox or the correct versions.</p>
</div>
<p>You can search for the Agent in the search bar, and click and drag the Agent into the canvas to add it. An instance of an Agent added to the canvas is referred to as a Stream Object.</p>
<p><img src="../images/e2e-1.png" alt=""></p>
<p>Once you have all four Stream Objects in the Data Stream canvas, rename them as follows:</p>
<ul>
<li>Event Simulator as &quot;Simulate Pump Data&quot;</li>
<li>Calculated Field as &quot;Add Pump Identifier&quot;</li>
<li>CSV as &quot;Simulate Context Data for Assets&quot;</li>
<li>Join as &quot;Contextualize Data&quot;</li>
</ul>
<p>To change the name of a Stream Object, click the text and edit it.</p>
<p>Your stream should end up looking like this:</p>
<p><img src="../images/image-1401.png" alt=""></p>
<p>Once you have renamed all four Stream Objects, connect them with arrows as follows:</p>
<ol>
<li>&quot;Simulate Pump Data&quot; to &quot;Add Pump Identifier&quot;</li>
<li>&quot;Add Pump Identifier&quot; to &quot;Contextualize Data&quot; (first input)</li>
<li>&quot;Simulate Context Data for Assets&quot; to &quot;Contextualize Data&quot; (second input)</li>
</ol>
<p>To connect two Stream Objects, click and drag the green rectangle (Output) at the bottom edge of the first Stream Object, move the cursor to the green rectangle on the left edge of the second Stream Object (Input).</p>
<p><img src="../images/drag-ds-arrow.gif" alt=""></p>
<p>Your connected Stream Objects should look like this:</p>
<p><img src="../images/e2e-1-2.png" alt=""></p>
<p>Now we will configure the added Stream Objects. Save your Data Stream now and after every change to propagate the changes throughout the Data Stream.</p>
<div class="NOTE">
<h5>Note</h5>
<p>See the article on <a href="../concepts/data-stream/stream-object-configuration.html">how to configure Stream Objects</a> for more information.</p>
</div>
<h4 id="simulate-pump-data">Simulate Pump Data</h4>
<p><img src="../images/image-392.png" alt=""></p>
<p>We will need to simulate ingesting data about flow rate and temperature from sensors in the pumps. We can achieve this with the <a href="https://xmpro.gitbook.io/event-simulator/">Event Simulator</a> Agent. The &quot;Simulate Pump Data&quot; Event Simulator will constantly generate data defined by the Event Definitions at a rate defined by the Events per Second property.</p>
<div class="NOTE">
<h5>Note</h5>
<p>To edit the configuration of a Stream Object, either double-click it or click it once to select it and click the &quot;Configure&quot; button on the canvas header.</p>
</div>
<p>Edit the &quot;Simulate Pump Data&quot; Stream Object and click the + button to the right of the Event Definition grid to add event definitions.</p>
<p>Add two event definitions as follows:</p>
<ul>
<li><em>Name</em>: WaterTemperature<br>
<em>Type</em>: Range<br>
<em>Minimum Value</em>: 100<br>
<em>Maximum Value</em>: 160<br>
<em>Spike Value</em>: 0</li>
<li><em>Name</em>: FlowRate<br>
<em>Type</em>: Range<br>
<em>Minimum Value</em>: 14000<br>
<em>Maximum Value</em>: 16000<br>
<em>Spike Value</em>: 0</li>
</ul>
<p>Ignore the Spike Value and Generate Spike options, as they are not relevant to the current scenario.</p>
<p>Change the Events per Second to 1. Click &quot;Apply&quot; on the Simulate Pump Data configuration page. Then click &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/image-1308.png" alt=""></p>
<h4 id="add-pump-identifier">Add Pump Identifier</h4>
<p><img src="../images/image-805.png" alt=""></p>
<p>We need to add a way to simulate having three different pumps. At the moment the data is not identified, so we will need to add a range of identifiers to the data. This can be achieved with the <a href="https://xmpro.gitbook.io/calculated-field/">Calculated Field</a> Agent. The &quot;Add Pump Identifier&quot; Calculated Field will add a &quot;PumpId&quot; field to the data generated with values &quot;A&quot;, &quot;B&quot;, and &quot;C&quot; for each subsequent row.</p>
<p>To configure the Stream Object, double click on &quot;Add Pump Identifier&quot; to open its configuration. Or, you can also highlight the Stream Object and click on the &quot;Configure&quot; option at the top of the Data Stream.</p>
<p>Keep &quot;Append to Current&quot; as the &quot;Results Returned As&quot; value. This will add the value calculated by the expression to each row instead of creating a new row with the identifier.</p>
<p>Click the + button to the right of the Expressions grid to add the following expression:</p>
<ul>
<li><em>Calculated Field</em>: &quot;PumpId&quot; - The field won't exist yet in the dropdown, so you must enter it yourself.<br>
<em>Expression</em>: <code>ReadingNo % 2 == 0 ? &quot;A&quot; : ReadingNo % 3 == 0 ? &quot;B&quot; : &quot;C&quot;</code><br>
<em>Data Type</em>: String</li>
</ul>
<p><img src="../images/image-1294.png" alt=""></p>
<p>Press &quot;Apply&quot; on the PumpId expression and the Add Pump Identifier configuration pages, and press &quot;Save&quot; on the Data Stream page.</p>
<h4 id="simulate-context-data-for-assets">Simulate Context Data for Assets</h4>
<p><img src="../images/image-1810.png" alt=""></p>
<p>There is often metadata associated with assets that is not part of the live data from the sensors.  In this case, metadata includes whether the pump is currently under maintenance, the manufacturer, and the last service date. We must retrieve this data from elsewhere. In a production environment, this might be an SAP EAM system, but for this example, we can achieve this through the <a href="https://xmpro.gitbook.io/csv/">CSV Context Provider</a> Agent.</p>
<p>Double-click on the &quot;Simulate Context Data for Assets&quot; Stream Object to open the configuration menu. You can also highlight the Stream Object and click on the &quot;Configure&quot; option at the top of the Data Stream.</p>
<p>Download the provided file. The contents of the file are below the download link.</p>
<p><a href="../resources/images/AssetsContext.csv">AssetsContext.csv</a></p>
<pre><code>PumpId,UnderMaintenance,Manufacturer,ServiceDate
A,FALSE,Bosch,2020-10-12
B,FALSE,Bosch,2020-08-06
C,FALSE,Bosch,2020-01-04
</code></pre>
<p>Then under Data check the <em>Use Uploaded File?</em> checkbox and upload the file into the CSV Context Provider. The CSV Definition will be automatically detected and filled.</p>
<p>Change <em>UnderMaintenance</em> from a <em>String</em> to a <em>Boolean</em>, using the options from the dropdown. Also change <em>ServiceDate</em> from a <em>String</em> to a <em>DateTime</em>, using the dropdown. Leave the <em>Limit Rows</em>, <em>Filter Criteria,</em> and <em>Sort by</em> properties as their default values.</p>
<p>When completed, press the &quot;Apply&quot; button at the top of the configuration, and then save the Data Stream.</p>
<p><img src="../images/image-1380.png" alt=""></p>
<h4 id="contextualize-data">Contextualize Data</h4>
<p><img src="../images/image-441.png" alt=""></p>
<p>The metadata about each pump needs to be appended to each row of sensor data received from the pumps. This can be achieved with the <a href="https://xmpro.gitbook.io/join/">Join</a> Agent.</p>
<p>The &quot;Contextualize Data&quot; Join will join together the data from the CSV Context Provider and the Calculated Field using the PumpId as the common field. Configure it as follows:</p>
<ul>
<li><em>Behavior</em>: Context - we want to join some context data to our row.</li>
<li><em>Context Endpoint</em>: Right - we must tell the Stream Object which input has Context data. The Context Data is received by the Right endpoint, as shown in the image below.</li>
</ul>
<p><img src="../images/image-229.png" alt=""></p>
<ul>
<li><em>Select List</em>: all fields except R_PumpId (as the same data will be in L_PumpId).</li>
<li><em>Join Type</em>: Inner Join.</li>
<li><em>On</em>: <code>L_PumpId</code> <code>=</code> <code>R_PumpId</code></li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>You may need to maximize the page to see the grid properly. You can do this by pressing the &quot;Maximize&quot; button in the top-right corner of the page. Press the &quot;Restore&quot; button in the top-right corner to return it to the regular size.</p>
</div>
<p>Press &quot;Apply&quot; on the Contextualize Data configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/image-1711.png" alt=""></p>
<h3 id="create-analytics-and-calculations">Create Analytics and Calculations</h3>
<p>In this section, we will add some analytics and calculations that will find exceptions, transform the units of the data and find the average level across 5 seconds.</p>
<h4 id="ignore-pumps-under-maintenance">Ignore Pumps Under Maintenance</h4>
<p><img src="../images/image-983.png" alt=""></p>
<p>We want to only pass data onward in the Stream if the current pump is not under maintenance. This can be achieved with the <a href="https://xmpro.gitbook.io/filter/">Filter</a> Agent. To do this, drag in a <a href="https://xmpro.gitbook.io/filter/">Filter</a> Agent and connect the &quot;Contextualize Data&quot; Join endpoint to the Filter.</p>
<p>Rename the Filter to &quot;Ignore Pumps Under Maintenance&quot;, and save. Double-click on the Stream Object to open the configuration menu. Click on the + symbol to add a new rule for the filter. Select &quot;Add Condition&quot;, and configure the Filter to have the logic <code>R_UnderMaintenance</code> <code>Equals</code> <code>false</code>.</p>
<p>The configuration and Data Stream should look like this:</p>
<p><img src="../images/e2e-2.png" alt=""></p>
<p>There are two green outputs to the Filter Stream Object, the left output is where the data is output to when the filter is true. The right output is where the data is output to when the filter is false. The left True Output should be the output that you connect to the next Stream Object.</p>
<p><img src="../images/image-627.png" alt=""></p>
<p>Press &quot;Apply&quot; on the Ignore Pumps Under Maintenance Data configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<h4 id="change-unit-to-ls">Change Unit to L/s</h4>
<p><img src="../images/image-426.png" alt=""></p>
<p>The data from the Pump Data has different units than what we want to use - it is measured in L/m and we want the units to be in L/s. This can be solved with the <a href="https://xmpro.gitbook.io/calculated-field/">Calculated Field</a> Agent. To transform the data, drag in a <a href="https://xmpro.gitbook.io/calculated-field/">Calculated Field</a> Agent, and rename it to &quot;Change Unit to L/s&quot;.</p>
<p>Connect the &quot;Ignore Pumps Under maintenance&quot; Filter endpoint to the Calculated Field and Save. Make sure you connect the left True Output of the  &quot;Ignore Pumps Under maintenance&quot; Stream Object to the Calculated Field's input.</p>
<p><img src="../images/nlryp9xjvq.gif" alt=""></p>
<p>Configure the Calculated Field as follows:</p>
<ul>
<li><em>Calculated Field</em>: L_FlowRate</li>
<li><em>Expression</em>: <code>L_FlowRate / 60</code></li>
<li><em>Data Type</em>: Double</li>
</ul>
<p>This will divide the flow rate by 60 to make the value in L/s instead of L/m.</p>
<p>Press &quot;Apply&quot; on the Change Unit to L/S configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/e2e-3.png" alt=""></p>
<h4 id="average-across-5-seconds">Average across 5 seconds</h4>
<p><img src="../images/image-753.png" alt=""></p>
<p>The Use Case requires that engineers should be alerted if the flow rate averaged over 5 seconds falls below 250 L/s, and if the temperature averaged over 5 seconds also starts to rise above 130°C then a critical level alert should be raised. This can be achieved with the <a href="https://xmpro.gitbook.io/aggregate/">Aggregate</a> Agent.</p>
<p>To calculate the average temperature and flow rate over 5 seconds, drag in the <a href="https://xmpro.gitbook.io/aggregate/">Aggregate</a> Agent and name it &quot;Average across 5 seconds&quot;. Connect the &quot;Change Unit to L/S&quot; Calculated Field endpoint to the Aggregate Agent and save.</p>
<div class="NOTE">
<h5>Note</h5>
<p>You may need to maximize the page to see the grid properly. You can do this by pressing the &quot;Maximize&quot; button in the top-right corner of the page. Press the &quot;Restore&quot; button in the top-right corner to return it to the regular size.</p>
</div>
<p>Configure the Aggregate Agent as follows:</p>
<ul>
<li><em>Attributes to group on</em>: L_PumpId</li>
<li><em>Aggregate</em>:
<ul>
<li>Average (of) L_FlowRate (as) FlowRateAvg</li>
<li>Average (of) L_WaterTemperature (as) CoolantTemperatureAvg</li>
</ul>
</li>
<li><em>Unit</em>: Second</li>
<li><em>Size</em>: 5</li>
</ul>
<p>Press &quot;Apply&quot; on the Average across 5 seconds configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/e2e-4.png" alt=""></p>
<p><img src="../images/image-1759.png" alt=""></p>
<h4 id="data-conversion">Data Conversion</h4>
<p><img src="../images/image-926.png" alt=""></p>
<p>We want the data for the average flow rate to be in integer format to display it more easily. This can be achieved through the <a href="https://xmpro.gitbook.io/data-conversion/">Data Conversion</a> Agent. To do this, drag in a <a href="https://xmpro.gitbook.io/data-conversion/">Data Conversion</a> Agent and rename it to &quot;Data Conversion&quot;. Connect the &quot;Average across 5 seconds&quot; endpoint to the Data Conversion Agent and press &quot;Save&quot; on the Data Stream page.</p>
<p>Configure the Data Conversion Agent with the following two rows (You may need to maximize the page again). Click on the + symbol to add each row:</p>
<p>First row:</p>
<ul>
<li><em>Input Column</em>: &quot;FlowRateAvg&quot;</li>
<li><em>Output Alias</em>: &quot;FlowRateAvg&quot;</li>
<li><em>Data Type</em>: &quot;Int64&quot;</li>
</ul>
<p>Second row:</p>
<ul>
<li><em>Input Column</em>: &quot;CoolantTemperatureAvg&quot;</li>
<li><em>Output Alias</em>: &quot;CoolantTemperatureAvg&quot;</li>
<li><em>Data Type</em>: &quot;Int64&quot;</li>
</ul>
<p>The input columns should already have FlowRateAvg and CoolantTemperatureAvg as options listed in the dropdown menu.</p>
<p>This will replace the FlowRateAvg and CoolantTemperatureAvg with values converted to Integer format.</p>
<p>Press &quot;Apply&quot; on the Data Conversion configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/e2e-5.png" alt=""></p>
<p><img src="../images/image-797.png" alt=""></p>
<h3 id="output-formatting-and-action-integrations">Output Formatting and Action Integrations</h3>
<p>In this section, we will integrate our Data Stream with the App Designer to trigger Recommendations and send data to Apps.</p>
<h4 id="run-recommendation">Run Recommendation</h4>
<p><img src="../images/image-1330.png" alt=""></p>
<p>First, we want to trigger Recommendations with the data from the Data Stream. This can be achieved with the <a href="https://xmpro.gitbook.io/run-recommendation/">Run Recommendation</a> Agent. To do this, drag in a <a href="https://xmpro.gitbook.io/run-recommendation/">Run Recommendation</a> Agent and rename it to &quot;Run Recommendation&quot;. Connect the &quot;Data Conversion&quot; endpoint to the Run Recommendation Agent and press &quot;Save&quot; on the Data Stream page</p>
<p>Configure the Run Recommendation Stream Object as follows:</p>
<ul>
<li><em>Url</em>: the URL of the App Designer site</li>
<li><em>Key</em>: the App Designer Key.</li>
<li><em>Output on first occurrence Only?</em>: true</li>
<li><em>Entity Identifier</em>: L_PumpId - this is for the Recommendation to create separate Alerts for each Entity</li>
<li><em>Columns To Return</em>: Leave empty (Return all columns)</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>It is highly recommended that you use any <a href="../concepts/variable.html">variables</a> that you already have that store the URL or key. You may use the variables that have already been set up if you are using the Free Trial.</p>
</div>
<p>Otherwise, the App Designer URL and Key can be found by following these steps:</p>
<ol>
<li>Open the App Designer in a new tab by clicking the &quot;Waffle&quot; button (a.ka. &quot;App Launcher&quot;) in the top left corner of the page and clicking &quot;App Designer&quot;.</li>
<li>Copy the App Designer URL from the browser's address bar and paste it into the Url field in the Run Recommendation configuration.</li>
<li>Click the &quot;Settings&quot; button in the top bar and click the &quot;Copy&quot; button to the right of the Integration Key and paste it in the Key field in the Run Recommendation configuration. You will only be able to see this if you have Admin access. If you do not have Admin access, you can ask an Admin to share the key with you.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>If you are configuring the URL and Integration Key without using variables, make sure you uncheck the &quot;Use Connection Variables&quot; checkbox option first.</p>
</div>
<p><img src="../images/image-448.png" alt=""></p>
<p><img src="../images/image-1828.png" alt=""></p>
<p>This is how your Data Stream and configuration should look:</p>
<p><img src="../images/e2e-6.png" alt=""></p>
<p>Press &quot;Apply&quot; on the Run Recommendation configuration page, and press &quot;Save&quot; on the Data Stream page.</p>
<h4 id="xmpro-app">XMPro App</h4>
<p><img src="../images/image-1493.png" alt=""></p>
<p>We want to send data to an App to be displayed as a decision support dashboard for the engineers. This can be achieved through the <a href="https://xmpro.gitbook.io/xmpro-app/">XMPro App</a> Agent.</p>
<p>Drag two <a href="https://xmpro.gitbook.io/xmpro-app/">XMPro App</a> Agents onto the Data Stream and name them &quot;Post Pump Overview&quot; and &quot;Post Pump Specifics&quot;. One will send an overview of the data for all pumps, and the other will send a large cached amount of data for each pump.</p>
<p>Now we run into a problem; we want to connect multiple agents to the same data. To solve this, drag a <a href="https://xmpro.gitbook.io/broadcast/">Broadcast</a> Agent into the Stream, and rename it to &quot;Broadcast&quot;. Disconnect the &quot;Ignore Pumps Under Maintenance&quot; input arrow and connect it to the new Broadcast Stream Object. You can disconnect the arrow by highlighting the arrow itself and clicking on the &quot;Delete&quot; button at the top of the Data Stream.</p>
<p>Alternatively, you can click on the green rectangle (input) on the &quot;Ignore Pumps Under Maintenance&quot; Stream Object, and drag the arrow to the green rectangle (input) of the &quot;Broadcast&quot; Stream Object. Connect the Broadcast endpoints to the two XMPro App Stream Objects and the &quot;Ignore Pumps Under maintenance&quot; Filter, as shown in the video below:</p>
<p><img src="../images/epb8odj6me.gif" alt=""></p>
<p>Press the &quot;Save&quot; button at the top of the Data Stream. Your Data Stream should now look like this:</p>
<p><img src="../images/e2e-7.png" alt=""></p>
<p>Configure the &quot;Post Pump Overview&quot; Stream Object to store in cache and output only one row per pump as follows: (Follow the steps given for the Run Recommendation Agent above to get the Url and Key.)</p>
<ul>
<li><em>Url</em>: the URL of the App Designer site</li>
<li><em>Key</em>: the App Designer Key.</li>
<li><em>Cache Size</em>: 1</li>
<li><em>Replace Cache</em>: false</li>
<li><em>Cache Per Entity</em>: true</li>
<li><em>Entity Identifier</em>: L_PumpId</li>
<li><em>Primary Key</em>: L_PumpId</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>It is highly recommended that you use any <a href="../concepts/variable.html">variables</a> that you already have that store the URL or key. You may use the variables that have already been set up if you are using the Free Trial.</p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>If you are configuring the URL and Integration Key without using variables, make sure you uncheck the &quot;Use Connection Variables&quot; checkbox option first.</p>
</div>
<p>Press &quot;Apply&quot; on the Post Pump Overview configuration page and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/e2e-8.png" alt=""></p>
<p>Configure the &quot;Post Pump Specifics&quot; Stream Object to cache and output 20 rows per pump as follows:</p>
<ul>
<li><em>Url</em>: the URL of the App Designer site</li>
<li><em>Key</em>: the App Designer Key. <a href="../how-tos/manage-site-settings.html#app-designer-settings">For more detail on how to find the key in the Site Settings, see this article</a>.</li>
<li><em>Cache Size</em>: 20</li>
<li><em>Replace Cache</em>: false</li>
<li><em>Cache Per Entity</em>: true</li>
<li><em>Entity Identifier</em>: L_PumpId</li>
<li><em>Primary Key</em>: L_PumpId and L_ReadingNo</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>It is highly recommended that you use any <a href="../concepts/variable.html">variables</a> that you already have that store the URL or key. You may use the variables that have already been set up if you are using the Free Trial.</p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>If you are configuring the URL and Integration Key without using variables, make sure you uncheck the &quot;Use Connection Variables&quot; checkbox option first.</p>
</div>
<p>Press &quot;Apply&quot; on the Post Pump Specifics configuration page and press &quot;Save&quot; on the Data Stream page.</p>
<p><img src="../images/end-to-end-use-case-configure-post-pump-overview-xmpro-ap-to-cache-20-rows.png" alt=""></p>
<p>Your Data Stream is now complete. To start the stream, click on the &quot;Publish&quot; button. To see the data flow at each Stream Object, press the &quot;Live View&quot; button and select all the Stream Objects. Alternatively, you can also select specific Stream Objects. For example, if you just want to see the data flowing through to the XMPro App, select the XMPro App Stream Object.</p>
<h3 id="troubleshooting-the-data-stream">Troubleshooting the Data Stream</h3>
<p>To see if data is flowing properly within the Data Stream, you will need to Publish the Data Stream. Before publishing, you want to make sure there are no errors in the configurations of the Stream Objects. Click on the &quot;Integrity Check&quot; option at the top of the Data Stream. If any errors are present, the Stream Object with the errors will turn red. Hovering over the Stream Object will show you the list of errors. Once these errors are fixed, you will need to run the Integrity Check again.</p>
<div class="NOTE">
<h5>Note</h5>
<p>To read more about Integrity Checks, read the <a href="../concepts/data-stream/verifying-stream-integrity.html">Verifying Stream Integrity</a> article.</p>
</div>
<p>Once all Stream Objects have passed the Integrity Check, you can click on &quot;Publish&quot;, then &quot;Live View&quot;, on the top of the Data Stream. The Live Data will open on the side, and you can then click on &quot;Select Views&quot; to click on the Stream Objects you want to troubleshoot.</p>
<p><img src="../images/e2e-10.png" alt=""></p>
<p>If data is displaying for the Stream Object, that means the Stream Object should be working correctly. If not, you can recheck your configuration values for the Stream Object. You can also check if you have a Stream Host running. There are also other ways that you can troubleshoot Data Streams.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For more ways on how you can troubleshoot a Data Stream, read the <a href="../how-tos/data-streams/troubleshoot-a-data-stream.html">Troubleshoot a Data Stream</a> article.</p>
</div>
<h2 id="2-create-event-rules--recommendations">2. Create Event Rules &amp; Recommendations</h2>
<p>The Use Case requires that engineers should be alerted if the flow rate averaged over 5 seconds falls below 250 L/s, furthermore, if the temperature averaged over 5 seconds also starts to rise above 130°C then a critical level alert should be raised. To achieve this we will use Recommendations.</p>
<p>Recommendations can be found in the App Designer. Open the App Designer in a new tab by clicking the button in the top left corner of the page and clicking &quot;App Designer&quot;.</p>
<p><img src="../images/image-448.png" alt=""></p>
<p>To access the Recommendation management section of the App Designer, click on the &quot;Recommendations&quot; button in the left menu and press the &quot;Manage Recommendations&quot; button on the page.</p>
<p><img src="../images/image-1340.png" alt=""></p>
<h3 id="create-event-rule-and-rule-logic">Create Event Rule and Rule Logic</h3>
<p>To trigger the required Alerts, we will be creating a Recommendation with two Rules. First, create a Recommendation called &quot;Pump Flow Threshold&quot;. The Data Stream should be the same &quot;Pump Condition Monitoring&quot; stream we created previously.</p>
<p>To create a new Recommendation, follow the steps below after navigating to the Recommendation management page:</p>
<ol>
<li>Click &quot;New&quot;.</li>
<li>Specify a name and category for your new Recommendation.</li>
<li>Choose a Data Stream to receive data from.</li>
<li>Click &quot;Save&quot;<em>.</em></li>
</ol>
<p><img src="../images/image-1410.png" alt=""></p>
<div class="WARNING">
<h5>Warning</h5>
<p>Make sure to click the &quot;Manage Access&quot; command and give at least yourself Run Access, otherwise, you won't be able to see any Recommendation Alerts that will be generated by this Recommendation.</p>
</div>
<p><img src="../images/image-1511.png" alt=""></p>
<p>This Rule will notify Engineers when the Flow Rate is lower than 250 L/s and give them instructions and resources to help resolve the issue.</p>
<p>Select the <em>Enable Execution Order</em> checkbox, since we want the more critical rule to override the medium rule. Create a Rule by pressing the + button to the right of the Rules list.</p>
<p><img src="../images/image-1681.png" alt=""></p>
<p>Give the Rule the following properties:</p>
<div class="NOTE">
<h5>Note</h5>
<p>The tags for the Alert Heading and Alert Description fields will not work if they are copied and pasted into the field. You will need to select the tags yourself by adding an <code>@</code> symbol and selecting from the tags in the list.</p>
</div>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule Name</td>
<td>Medium - Flow rate falling</td>
<td>The Rule Name is for identification only and will not be shown to the user in the Recommendation Alerts grid or detailed view.</td>
</tr>
<tr>
<td>Alert Headline</td>
<td>Warning <code>@L_PumpId</code>: Flow rate is falling</td>
<td>This refers to the headline that the Recommendation Alert will be created with. Any tag (starting with @) will be replaced with the value output from the Data Stream. Add tags by typing @ and selecting the item.</td>
</tr>
<tr>
<td>Alert Description</td>
<td>Flow rate is reported to be falling, danger of plant overheating and shutdown. Flow Rate: <code>@FlowRateAvg</code> Coolant Temperature: <code>@CoolantTemperatureAvg</code></td>
<td>This refers to the description that the Recommendation Alert will be created with. Any tag (starting with @) will be replaced with the value output from the Data Stream.</td>
</tr>
<tr>
<td>Alert Ranking</td>
<td>Medium</td>
<td>The priority level that the Recommendation Alert will be created with. Priority level determines the order in which the Alerts will be displayed.</td>
</tr>
<tr>
<td>Icon</td>
<td>An icon of your choice (hover your mouse over the default icon to upload a different one - sample icons can be found in the <a href="../resources/icon-library.html">Icon Library</a>)</td>
<td>The icon that will be displayed on the Recommendation Alert in the grid and in detailed view.</td>
</tr>
<tr>
<td>Impact Metric</td>
<td><p>Prefix: <em>$</em></p><p>Value: <em>15</em></p><p>Unit of Measurement: <em>K</em></p></td>
<td>The impact that the Recommendation Alert will have. For example, if the value for this was $15K, that means that the cost of the condition causing the Alert would be $15K (or $15000). This will be shown on Alerts in the Recommendation Block in App Pages.</td>
</tr>
<tr>
<td>Rule Logic</td>
<td><code>FlowRateAvg</code> <code>Is less than or equal to</code> <code>250</code></td>
<td><p>Data sent from the selected Data Stream is passed through the Rule Logic and if the conditions created are met by the data (and if Recurrence is set to All Occurrences or First Occurrence and no Pending Alert exists), a new Recommendation Alert will be created. </p><p>You can add new conditions or groups by clicking the + button. Groups can be nested within each other to create advanced logic. In an &quot;And&quot; group, all the conditions must be true, and in an &quot;Or&quot; group, only one of the conditions must be true to trigger an alert.</p></td>
</tr>
</tbody>
</table>
<p>The Rule Logic determines whether a Recommendation Alert will be created on receiving data from the Data Stream.</p>
<p><img src="../images/image-226.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p><a href="../concepts/recommendation/rule.html#rule-logic">For more details on Rule Logic, see this article</a>.</p>
</div>
<h3 id="create-recommendations--triage-instructions">Create recommendations &amp; Triage Instructions</h3>
<p>There should be some instructions for the engineers to follow to help resolve the issue when it occurs. This can be provided through the Triage Instructions.</p>
<p>Continue creating the Rule with the following properties:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Enable Form</td>
<td>false</td>
<td>A flag that determines whether the Recommendation Alert will be created with a <a href="../concepts/recommendation/form.html">Form</a>.</td>
</tr>
<tr>
<td>Additional Recommendation Management Column</td>
<td>-</td>
<td>An additional column in the Recommendation Alerts grid.</td>
</tr>
<tr>
<td>Resolution</td>
<td>Manual</td>
<td><p>Resolution determines whether new data from the Data Stream will automatically resolve the Recommendation Alert if the Rule Logic is no longer true. </p><p><strong>Manual Resolution:</strong> A user must manually resolve each recommendation. </p><p><strong>Automatic Resolution:</strong> Recommendation auto resolves when trigger conditions are no longer true. This may impact performance.</p></td>
</tr>
<tr>
<td>Recurrence</td>
<td>First Occurrence</td>
<td><p>Recurrence determines whether new data from the Data Stream will create new Recommendation Alerts if there already exists a Pending Recommendation Alert and the Rule Logic is true. Recurrence will create an Alert for each unique Entity selected by the Data Stream. For example, since there are three pumps (A, B, and C), each pump will generate its own Alert when something goes wrong, and it will need to be resolved before new Alerts for that pump are created. </p><p><strong>First Occurrence:</strong> The current recommendation must be resolved before others can be triggered for the same rule.</p><p><strong>All Occurrences:</strong> A new recommendation will be triggered every time the rule conditions are true.</p><p>Recurrence will be disabled and be considered to be <strong>First Occurrence</strong> if the Recommendation has <strong>Execution Order</strong> enabled.</p></td>
</tr>
<tr>
<td>Log Data On</td>
<td>First Occurrence</td>
<td><p>Determines whether new events from the Data Stream that satisfy the Rule Logic, after a recommendation has been triggered, will be logged or not.</p><p><strong>First Occurrence:</strong> Current recommendation will only log the initial event which triggered the recommendation.</p><p><strong>All Occurrences:</strong> Event data will be stored for every instance that satisfies the rule logic.</p></td>
</tr>
<tr>
<td>Enable Triage Instructions</td>
<td>true</td>
<td>A flag that determines whether the Recommendation Alert will be created with Triage Instructions.</td>
</tr>
<tr>
<td>Triage Instructions</td>
<td></td>
<td><p>Instructions to help whoever is resolving the Recommendation Alert.</p><p><em>Find the Triage Instructions below to copy for this use case.</em></p></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><p>Possible problems causing a discharge pressure drop:</p><p></p><p><strong>Blocked Suction Pipe</strong></p><p>A partial obstruction can be caused by a piece of foreign material being drawn across the bottom of the suction pipe during the operation of the pump. Such an obstruction may not be sufficient to stop operation completely, but will result in a reduced output from the pump. It will also cause a drop in discharge pressure and amps, and will increase the vacuum reading on the pump suction. Rough running and vibration of the pump may also occur due to cavitation within the pump.</p><p></p><p><strong>Blocked Impeller</strong></p><p>Impellers are capable of passing a certain size particle. If a particle larger in size enters the suction pipe, it may become lodged in the eye of the impeller, restricting the output of the pump. Such an obstruction will usually result in a drop of amperes and a drop in both discharge pressure and suction vacuum readings. The out-of-balance effects resulting from this condition may cause pump vibration.</p><p></p><p><strong>SHUTTING DOWN PROCEDURE</strong></p><p>Before you shut down the pump, it should be allowed to operate for a short period on only clean water to clear the system.</p><p></p><p>Then proceed as follows:</p><ol><li>Depress the 'STOP PUMP' push-button on the control panel.</li><li>Gland seal water (if any) must be left on during all subsequent operations, namely: start-up, running, shutdown, runback and system drain. Gland water may only then be turned off.</li></ol></th>
</tr>
</thead>
</table>
<h3 id="provide-additional-resources-for-decision-support">Provide additional resources for decision support</h3>
<p>You can provide the Engineers with helpful links to videos, PDFs, or websites to help resolve the issue with the Resources.</p>
<p>Continue creating the Rule by checking Enable Resources and adding the following Resources:</p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Url</th>
</tr>
</thead>
<tbody>
<tr>
<td>Test Procedure</td>
<td><a href="http://xmdocsdownload.s3.amazonaws.com/Technical/WarmanETP.pdf">http://xmdocsdownload.s3.amazonaws.com/Technical/WarmanETP.pdf</a></td>
</tr>
</tbody>
</table>
<p>You can see this rule in action by clicking the &quot;Publish&quot; command in the Recommendation and in the Pump Condition Monitoring Data Stream. If the average flow rate coming from the Data Stream is lower than 250 L/s the Rule will generate an Alert for each Pump that can be viewed in the Recommendation Alerts grid.</p>
<p>Click on the &quot;Recommendations&quot; button to go back to the Recommendation Alerts grid.</p>
<p><img src="../images/image-405.png" alt=""></p>
<p>To see more details about the alert, click on a row in the &quot;Recommendation Alerts&quot; grid. The Recommendation Alert page provides details of the alert and allows you to monitor, discuss, and take action.</p>
<p><img src="../images/image-1717.png" alt=""></p>
<h3 id="multiple-rules-and-rule-escalation">Multiple Rules and Rule escalation</h3>
<p>We want to trigger new Alerts that override the Medium level alert raised before if the temperature averaged over 5 seconds also starts to rise above 130°C.</p>
<p>To do this we will create the second Rule and configure the escalation settings. This second Rule will notify Engineers when the Coolant Temperature is higher than 130°C and Flow Rate is lower than 250 L/s and give them instructions and resources to help resolve the issue.</p>
<p>To create another Rule, click on the Recommendations page from the left-hand menu, and click on &quot;Manage Recommendations&quot;. Select the &quot;Pump Flow Threshold&quot; Recommendation that was created previously.</p>
<p>To make amendments to the Recommendation, you will first need to unpublish the Recommendation, by clicking on the &quot;Unpublish&quot; button at the top of the Recommendation. Finally, click on the &quot;plus&quot; symbol under &quot;Rules&quot; to add the new Rule.</p>
<p>Create the new Rule with the following properties:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule Name</td>
<td>Critical - Plant is overheating</td>
</tr>
<tr>
<td>Alert Headline</td>
<td>Alert <code>@L_PumpId</code>: Plant has started to overheat due to low flow.</td>
</tr>
<tr>
<td>Alert Description</td>
<td>Plant is overheating due to low flow rate, immediate action is required to avoid damage. Temperature:  ﻿<code>@CoolantTemperatureAvg</code>﻿ Flow Rate: ﻿<code>@FlowRateAvg</code>﻿</td>
</tr>
<tr>
<td>Alert Ranking</td>
<td>High</td>
</tr>
<tr>
<td>Icon</td>
<td>Feel free to load a suitable icon or use the default. Sample icons can be found in the <a href="../resources/icon-library.html">Icon Library</a>.</td>
</tr>
<tr>
<td>Impact Metric</td>
<td><p>Prefix: <em>$</em></p><p>Value: <em>25</em></p><p>Unit of Measurement: <em>K</em></p></td>
</tr>
<tr>
<td>Rule Logic</td>
<td><p><code>FlowRateAvg</code> <code>Is less than or equal to</code> <code>250</code> </p><p> <code>CoolantTemperatureAvg</code>﻿ <code>Is greater than</code> <code>130</code></p></td>
</tr>
<tr>
<td>Enable Form</td>
<td>false</td>
</tr>
<tr>
<td>Additional Recommendation Management Column</td>
<td>-</td>
</tr>
<tr>
<td>Resolution</td>
<td>Manual</td>
</tr>
<tr>
<td>Recurrence</td>
<td>First Occurrence</td>
</tr>
<tr>
<td>Log Data On</td>
<td>First Occurrence</td>
</tr>
<tr>
<td>Enable Triage Instructions</td>
<td>false</td>
</tr>
<tr>
<td>Enable Resources</td>
<td>false</td>
</tr>
</tbody>
</table>
<p><img src="../images/image-190.png" alt=""></p>
<p>We also want the Critical Rule to override the Medium Rule. To do this, ensure that the <em>Enable Execution Order</em> and <em>Auto-Escalate</em> checkboxes are ticked in the Recommendation, and reorder the Rules to put the Critical Rule at the top.</p>
<p><img src="../images/image-269.png" alt=""></p>
<p>You can see the full Recommendation in action by clicking the &quot;Publish&quot; command in the Recommendation. Ensure that your Data Stream is also published and running. If the average coolant temperature is higher than 130°C and the average flow rate coming from the Data Stream is lower than 250 L/s the Rule will generate an Alert for each Pump that can be viewed in the Recommendation Alerts grid. Any pending Alerts from the Medium rule will be resolved and escalated to the new Alert.</p>
<p><img src="../images/image-1040.png" alt=""></p>
<p><img src="../images/image-46.png" alt=""></p>
<h2 id="3-create-event-boards--apps">3. Create Event Boards &amp; Apps</h2>
<p>The Use Case requires that the Engineers should be provided a view to check the history of Pump telemetry, maintenance records, and Reservoir Level in order to enable them to take necessary action. This requirement can be met through the use of an App with a couple of Pages.</p>
<h3 id="layout-event-boards">Layout Event Boards</h3>
<p>First, create an Application (or App) by pressing the &quot;New Application&quot; button in the left menu and clicking the &quot;Blank App&quot; template.</p>
<p><img src="../images/image-1029.png" alt=""></p>
<p>Give the App the following properties:</p>
<ul>
<li><em>Name</em>: &quot;Power Plant THG Event Board&quot;</li>
<li><em>Description</em>: &quot;An App to monitor assets at a power plant.&quot;</li>
<li><em>Category</em>: any</li>
<li><em>Icon</em>: Feel free to load a suitable icon. If you do not, the default icon will be used. Sample icons can be found in the <a href="../resources/icon-library.html">Icon Library</a>.</li>
<li><em>Default Theme</em>: Dark</li>
<li><em>Landing Page Layout</em>: the first item</li>
</ul>
<p><img src="../images/image-894.png" alt=""></p>
<p>Click on the &quot;Save&quot; button. This will take you to a page where you can view the list of pages in the App or edit the App itself. Click on the Landing Page to edit it.</p>
<p><img src="../images/image-1201.png" alt=""></p>
<h3 id="app-layout">App Layout</h3>
<p>We will want two sections on the landing page, so follow the steps to duplicate the Vertical Stacked Layout as shown in the screenshot below.</p>
<ol>
<li>Click &quot;Page Layers&quot;.</li>
<li>Click on the carets to expand the layers until you reach the <strong>second</strong> Vertical Stacked Layout.</li>
<li>Click on the Vertical Stacked Layout.</li>
<li>A blue toolbar will appear at the top-right corner of the block. Press the third button with a &quot;Clone&quot; symbol to duplicate the Vertical Stacked Layout and everything it contains.</li>
</ol>
<p><img src="../images/image-1538.png" alt=""></p>
<p><img src="../images/image-522.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the article on <a href="../concepts/application/page-layers.html">Page Layers</a> for more information.</p>
</div>
<p>The result should look as below:</p>
<p><img src="../images/image-703.png" alt=""></p>
<p>You can rename both Vertical Stacked Layouts to identify them. In the Page Layers tab, double click the Left Vertical Stacked Layout to change the text to 'Left Vertical Stacked Layout'. Double click on the text of the other Right Vertical Stacked Layout and rename that to 'Right Vertical Stacked Layout'.</p>
<p>The left side of the page should be twice as wide as the right side, so follow the steps to change the Left Vertical Stacked Layout's Flex Grow property in the Block Styling to 2 as shown in the screenshot below.</p>
<ol>
<li>Make sure the Left Vertical Stacked Layout is still selected in the Page Layers.</li>
<li>Click the &quot;Block Styling&quot; button to open the style manager.</li>
<li>Click the &quot;Flex Layout&quot; accordion item to expand it.</li>
<li>Change the Grow field to 2.</li>
<li>Press the &quot;Save&quot; button at the top of the Application designer.</li>
</ol>
<p><img src="../images/image-808.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the articles on <a href="../how-tos/apps/use-block-styling-and-devices.html">How to use the Style Manager</a> and <a href="../how-tos/apps/use-flex.html">How to use Flex</a> for more information.</p>
</div>
<p>The result should look like this:</p>
<p><img src="../images/image-796.png" alt=""></p>
<p>We want to display the properties of the pumps in regularly spaced and sized cards on an App page. To do this, create one card with a Data Source, which will repeat the card for each pump.</p>
<p>Change the Left Vertical Stacked Layout's Display property in the Block Styling to block, so that the cards will overflow to however many pumps are present.</p>
<p>Press the &quot;Save&quot; button at the top of the Application designer.</p>
<p><img src="../images/image-609.png" alt=""></p>
<p>Follow the steps below to select the left Card and delete it. We will replace the default Card with a useful layout.</p>
<ol>
<li>Open the Page Layers.</li>
<li>Expand to the Left Vertical Stacked Layout's Card.</li>
<li>Click the Card item to select the Card element.</li>
<li>Click the last button on the blue toolbar to delete the Card.</li>
</ol>
<p><img src="../images/image-2.png" alt=""></p>
<p><img src="../images/image-519.png" alt=""></p>
<p>Replace the deleted Card by dragging in a Card from the Blocks, which will include some extra items.</p>
<p><img src="../images/image-761.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the article on <a href="../concepts/application/block.html">Blocks</a> for more information.</p>
</div>
<p>We want the card to take up half the width of the left section, and overflow to the next line when there are more than 2 cards.</p>
<ol>
<li>Select the new Card using the Page Layers tab.</li>
<li>Click on the &quot;Block Styling&quot; tab.</li>
<li>At the top, in the &quot;Style Group&quot; field, click on the checkbox on the left of the &quot;card-gutter&quot; tag to unselect the card-gutter style group. This is because we only want to apply styles to this specific element.</li>
<li>Under the &quot;General&quot; subsection, change &quot;Display&quot; to &quot;inline-block&quot;.</li>
<li>Under the &quot;Dimensions&quot; subsection, change the Width to 50.</li>
<li>Under the &quot;Dimensions&quot; subsection, change the unit to %.</li>
</ol>
<p><img src="../images/image-118.png" alt=""></p>
<p><img src="../images/image-1119.png" alt=""></p>
<p>Rename the Metric text items to &quot;Status&quot;, &quot;Flow Rate&quot;, and &quot;Coolant Temperature&quot;. You can double-click the text items and change the text. The Status should show an Indicator (a colored circle) to display the status of the pump. Delete the top Value.</p>
<p>Right-align the remaining two Values by expanding the Typography section and changing the Text Align property to Right.</p>
<p><img src="../images/image-16.png" alt=""></p>
<p>Drag two Indicator Blocks from the Blocks tab into the deleted Value text item's box. Click the Box and change the Flex Justify to End. This will align the Indicators to the right side of the box.</p>
<p><img src="../images/image-715.png" alt=""></p>
<p>The &quot;Status&quot; indicator should be red or green, depending on whether the pump is under maintenance or not. Change the left Indicator's Color in the Block Properties to &quot;#ad6363&quot; (red), and the right to &quot;#398a33&quot; (green).</p>
<p><img src="../images/image-913.png" alt=""></p>
<h3 id="data-source-for-pump-data">Data Source for Pump Data</h3>
<p>Add the Data Source that will be used to display our pump data.</p>
<ol>
<li>Click on the &quot;Page Data&quot; button.</li>
<li>Click the + button next to Data Sources.</li>
<li>Add a Data Source with <em>Name</em> as Pump Data, <em>Connection</em> as Data Streams Connector, and <em>Entity</em> as Post Pump Overview.</li>
<li>Check Live Data Updates as well to keep the data constantly updated.</li>
<li>Click on the &quot;Save&quot; button.</li>
</ol>
<p><img src="../images/image-1278.png" alt=""></p>
<p><img src="../images/image-989.png" alt=""></p>
<p>Click the Card and set the Data Source in the Block properties tab to Pump Data. Set Show Default Row to Never, as we don't want an empty card at the end. You can also open the Page Layers tab and look at the highlighted Block to confirm that the correct Block is selected.</p>
<p><img src="../images/image-785.png" alt=""></p>
<p>When the data comes in for each pump, we want the cards to display the values for each pump. To do this, we will give the values, indicators, and heading dynamic or expression values.</p>
<p>To change a property to Expression mode, follow the steps below:</p>
<ol>
<li>Select the block (in this case the Heading of the card) through the canvas or Page Layers.</li>
<li>Click the &quot;Block Properties&quot; button.</li>
<li>When adding an expression for the &quot;PumpId&quot;, press the button on the left of the Text property field to toggle between Static, Dynamic and Expression value modes. Change the mode to Expression so you can enter an expression to display the Pump Id that is selected.</li>
<li>Give the Heading's Text property an expression value of <code>&quot;Pump &quot; + {L_PumpId}</code> by clicking the button on the left side of the field twice.</li>
</ol>
<p><img src="../images/image-27.png" alt=""></p>
<p><img src="../images/image-1458.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the <a href="../concepts/application/block-properties.html#dynamic-and-expression-properties">Dynamic and Expression Properties section of the Block Properties article</a> for more information.</p>
</div>
<p>Select the Value Block next to 'Flow Rate'. Click on the &quot;Block Properties&quot; tab and give the Text an expression value of <code>ToStr(Round({L_FlowRate})) + &quot; L/m&quot;</code>. Give the Coolant Temperature Value Text Block an expression value of <code>ToStr(Round({L_WaterTemperature})) + &quot;°C&quot;</code>.</p>
<p>The circle Indicators' Visible property should be changed to an expression value of <code>{R_UnderMaintenance}</code> and <code>!{R_UnderMaintenance}</code> respectively.</p>
<p>Change the text of the Title to &quot;Pumps at Power Plant THG&quot;.</p>
<p>To launch the App to see how it looks, press the &quot;Save&quot; button at the top of the Page and then press the &quot;Launch&quot; button.</p>
<p><img src="../images/image-1451.png" alt=""></p>
<p>Each unique pump entity will have its own card, and data will be updated constantly for the Flow Rate and Coolant Temperature.</p>
<p>To get back to editing the App, press the &quot;Edit&quot; button at the top-right of the App. This button will only be shown for users who have been granted access to the App.</p>
<p><img src="../images/image-121.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the <a href="../how-tos/manage-access.html">How to Manage Access</a> article for more information.</p>
</div>
<h4 id="drilldown-page">Drilldown Page</h4>
<p>The Engineers want to be able to see a detailed chart and history of each pump when they click on a pump's card on the landing page. To make a new drilldown Page, close the Landing Page, and add a new Page with the + button. Name the Page &quot;Pump Details&quot;.</p>
<p><img src="../images/image-885.png" alt=""></p>
<p>To link to the newly created Pump Details Page when clicking a card, close the page and open the Landing Page again. You can click and drag the grey header of the page to the right to see the list of pages.</p>
<video autoplay loop muted playsinline style="max-width: 100%; height: auto;">
  <source src="../images/whyfurc4wp.mp4" type="video/mp4">
</video>
<p>Click on the &quot;Page Layers&quot; tab. Expand the carets until you get to &quot;Box Hyperlink&quot;, and select it.</p>
<p><img src="../images/image-1116.png" alt=""></p>
<ol>
<li>Click on the &quot;Block Properties&quot; tab.</li>
<li>Change the <em>Navigate to</em> property to &quot;Page&quot;, the <em>Page</em> property to &quot;Pump Details&quot;, and click the &quot;Edit&quot; button to the right of Pass Page Parameters.</li>
<li>Press the + button on the Pass Page Parameters page to add a new Parameter to the Pump Details Page.</li>
<li>Name the Parameter &quot;PumpId&quot; and give it the <em>Type</em> &quot;String&quot;.</li>
<li>Click on &quot;Add&quot;.</li>
<li>As mentioned previously, clicking on the icon on the left of the textbox field can toggle between Static, Dynamic, and Expression modes. Click on the button in the Value column once to change it to 'Dynamic' mode, which is indicated by the Database symbol.</li>
<li>Select the value &quot;L_PumpId&quot; as this is the value we want to pass to the drill-down page.</li>
<li>Click &quot;Apply&quot; to apply your changes to the Pump Details page's Parameters and the Box Hyperlink.</li>
</ol>
<p><img src="../images/image-1510.png" alt=""></p>
<p><img src="../images/image-218.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>If you are unable to see the parameters in the drop-down list, double-check that the Data Source has been applied to the correct Card block, as shown above.</p>
</div>
<p>To see the navigation in action, launch the Landing Page and click on one of the cards. You will be navigated to the Pump Details page.</p>
<p>Press the &quot;Edit&quot; button at the top right of the Pump Details page to edit it.</p>
<p>We want a similar layout for this page, so follow the steps from the Landing Page to duplicate the Vertical Stacked Layout, and make the left side twice as wide as the right side. See the instructions that previously showed how to do this.</p>
<p>We want two cards inside the Left Vertical Stacked Layout, so select the left Card and duplicate it.</p>
<p><img src="../images/image-1383.png" alt=""></p>
<p>We want the top left card to be twice as tall as the bottom left card, so change the top left Card's Flex Grow property to 2 in the Block Styling. Remember to uncheck the card-gutter style group to make the style only apply to the selected element.</p>
<p><img src="../images/image-520.png" alt=""></p>
<p>We want the title of the page to be the Pump's name, so change the Title's Text property to an expression value <code>&quot;Pump &quot; + {Parameter.PumpId}</code>.</p>
<p>We also want the Headings of the page to explain what is being shown, so change the top-left heading's text to &quot;Details&quot; and the bottom-left heading's text to &quot;Maintenance History&quot;.</p>
<p><img src="../images/image-1668.png" alt=""></p>
<p>We need to get the data from the Data Stream. Go back to the Page Data tab, and next to 'Data Sources', click on the &quot;plus&quot; symbol to add another Data Source. Name the new Data Source &quot;Pump Live Data&quot;, with the Connection &quot;Data Streams Connector&quot;, Entity as &quot;Post Pump Specifics&quot;, and Live Data Updates checked.</p>
<p>Drag a Chart into the Details card. Highlight the Chart, and in the Block Properties tab, set the Data Source of the Chart to &quot;Pump Live Data&quot;.</p>
<p>Add a Filter to the Data Source of <code>L_PumpId</code> <code>Equals</code> <code>{Parameter.PumpId}</code>. Click on the &quot;plus&quot; button to start adding the filter.</p>
<p><img src="../images/image-58.png" alt=""></p>
<p>When selecting the &quot;PumpId&quot;, press the button on the left of the field to toggle between Static and Dynamic value modes. Change the mode to Dynamic so you can select a dynamic value from the dropdown. Here you can select the &quot;PumpId&quot; Parameter. This will make sure the chart is only showing data from the pump that we are looking at.</p>
<p><img src="../images/image-1550.png" alt=""></p>
<div class="NOTE">
<h5>Note</h5>
<p>See the <a href="../blocks-toolbox/visualizations/chart.html">Chart</a> article for more information.</p>
</div>
<p>We want the chart to look great and display a line series in a separate panel for flow rate and temperature.  To do this, edit the Block Properties of the Chart as follows:</p>
<p>In the Appearance accordion item set the <em>Legend Alignment</em> to &quot;Align Bottom Center&quot;.</p>
<p><img src="../images/e2e-edit-panes.png" alt=""></p>
<p>In the Axes accordion item, change <em>Type</em> to &quot;Date Time&quot;, <em>Enable Pan and Zoom</em> to &quot;False&quot; and <em>Display Grid Lines</em> to &quot;False&quot;.</p>
<p><img src="../images/image-1077.png" alt=""></p>
<p>In the Data accordion item, add two series with the + button to the right of the Series list as follows (leave the default value if it is not specified):</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Flow Rate Series</th>
<th>Temperature Series</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Flow Rate</td>
<td>Temperature</td>
</tr>
<tr>
<td>Color</td>
<td>#7ee2b5</td>
<td>#c46565</td>
</tr>
<tr>
<td>Type</td>
<td>Line</td>
<td>Line</td>
</tr>
<tr>
<td>Pane</td>
<td>Default</td>
<td>Temperature</td>
</tr>
<tr>
<td>X Axis Data</td>
<td>L_Timestamp</td>
<td>L_Timestamp</td>
</tr>
<tr>
<td>Y Axis Data</td>
<td>L_FlowRate</td>
<td>L_WaterTemperature</td>
</tr>
</tbody>
</table>
<p>When making the 'Temperature' series, you will need to add a new Pane called 'Temperature.'</p>
<p>To add a new Pane for the chart, click the 'Edit' button next to 'Pane' in the series property page.</p>
<p><img src="../images/e2e-edit-panes-3.png" alt=""></p>
<p>You can see how this looks by launching the page with the PumpId parameter &quot;A&quot;, &quot;B&quot;, or &quot;C&quot;</p>
<p><img src="../images/image-656.png" alt=""></p>
<p>On this page we want to also show the Engineers the pump maintenance history. This can be achieved through the use of a grid and a SQL Data Source. Below is a script that can be used to create the table used:</p>
<pre><code>CREATE TABLE [dbo].[PumpMaintenance](
	[Id] [bigint] IDENTITY(1,1) NOT NULL,
	[PumpId] [nvarchar](10) NOT NULL,
	[Timestamp] [date] NOT NULL,
	[Comments] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_PumpMaintenance] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
))

INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'A', CAST(N'2021-05-26' AS Date), N'Routine Inspection, No issues reported.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'B', CAST(N'2021-05-25' AS Date), N'Routine Inspection, No issues reported.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'C', CAST(N'2021-05-24' AS Date), N'Routine Inspection, No issues reported.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'A', CAST(N'2021-03-15' AS Date), N'High Vibration detected, main shaft replaced.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'B', CAST(N'2021-03-14' AS Date), N'Routine Inspection, bearing replaced.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'C', CAST(N'2021-03-13' AS Date), N'Routine Inspection, bearing replaced.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'A', CAST(N'2021-01-04' AS Date), N'Routine Inspection, No issues reported.')
INSERT INTO [dbo].[PumpMaintenance] ([PumpId], [Timestamp], [Comments]) VALUES (N'A', CAST(N'2020-07-25' AS Date), N'Routine Inspection, bearing replaced.')
</code></pre>
<p>Drag a Data Grid into the Maintenance History card and edit its Block Properties. Press the + button next to the Data Source select box to add a new Data Source, and name it &quot;Pump Maintenance.&quot;</p>
<p><img src="../images/image-790.png" alt=""></p>
<p>We want to add a SQL Data Source, but we don't have a SQL Connection yet. Press the + button next to the Connection select box and click on &quot;SQL Connector.&quot;</p>
<p>Give the new SQL Connector a Name, enter your own connection string, User Name, and Password, and choose a Database. If you are using the Free Trial, you can get these details in your welcome email. XMPro sets up a 2GB database for you to use during the 120-day trial period.</p>
<p><img src="../images/image-36.png" alt=""></p>
<p>Save the Connection and select it in the New Data Source. Select the &quot;PumpMaintenance&quot; table and give the Data Source the name &quot;Pump Maintenance&quot;.</p>
<p><img src="../images/image-1270.png" alt=""></p>
<p>Save the new Data Source and select it in the Data Grid's Block Properties.</p>
<p>This grid will show all the Pump Maintenance rows, but we want to show just the rows that this page is looking at. To do that, edit the Filter and add the filter logic: <code>PumpId</code> <code>Equals</code> <code>{Parameter.PumpId}</code></p>
<p><img src="../images/image-928.png" alt=""></p>
<p>We want to change the Data Grid's columns around to make them look good. Open the Columns accordion item, and reorder the columns by dragging the dotted handles to the left of the list. Order them Id, Comments, Timestamp, PumpId.</p>
<p><img src="../images/image-618.png" alt=""></p>
<p>We don't want to show the PumpId, as it will always be the same. To hide it, click the &quot;PumpId&quot; row in the list and change the <em>Visible</em> property to &quot;False&quot;. Apply the changes to the column.</p>
<p><img src="../images/image-924.png" alt=""></p>
<p>The Timestamp column should be in Date format, not Date Time. Edit the Timestamp column and change <em>Type</em> to &quot;Date&quot;.</p>
<p><img src="../images/image-137.png" alt=""></p>
<p>Launch the page with the PumpId parameter &quot;A&quot;, &quot;B&quot;, or &quot;C&quot; to see this in action. It should look like this:</p>
<p><img src="../images/image-265.png" alt=""></p>
<h3 id="easy-access-to-recommendations">Easy Access to Recommendations</h3>
<p>We want engineers to be able to see and respond to Recommendation Alerts from this App, so we should drag a Recommendations Block into the right card of both Pages. Also, rename the heading to &quot;Recommendations&quot;.</p>
<p><img src="../images/image-999.png" alt=""></p>
<p>To filter the Recommendation Alerts to the relevant ones only, select the &quot;Pump Flow Threshold&quot; in the Block Properties of the Recommendations Block on both pages.</p>
<p><img src="../images/image-490.png" alt=""></p>
<p>On the Pump Details Page, we only want to show the Recommendation Alerts for the specific pump we're looking at. To do this, Change the Entity ID property to <code>Equals</code> <code>Parameter.PumpId</code>.</p>
<p><img src="../images/image-558.png" alt=""></p>
<p>We have now completed the requirements of the Use Case. To see the App running live, click on the &quot;Launch&quot; button. You can also publish the App by dragging the canvas to the left to open the page list, and clicking on &quot;Publish&quot;. Here is how the final drill-down page looks:</p>
<p><img src="../images/image-417.png" alt=""></p>


  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: August 26, 2025</em></small></p>
  </div>
</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright © 2025 XMPro. All rights reserved.
        </div>
      </div>
    </footer>
  </body>
</html>
