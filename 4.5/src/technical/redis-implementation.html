<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>XMPro Redis Cache Implementation | XMPro </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="XMPro Redis Cache Implementation | XMPro ">
      <meta name="description" content="XMPro official documentation - Learn how to use XMPro&#39;s intelligent digital twin suite for real-time operational intelligence and automated decision-making.">
      
      <link rel="icon" href="../../images/favicon.png">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://xmpro.visualstudio.com/XMPro%20Development/_git/xmpro-development?path=docs/src/technical/redis-implementation.md&amp;version=GBrelease-4.5.2&amp;line=1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo-light.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="xmpro-redis-cache-implementation">XMPro Redis Cache Implementation</h1>

<h2 id="overview">Overview</h2>
<p>XMPro uses Redis as a distributed caching solution to improve performance and enable scalability across multiple application instances. Redis is automatically activated when you enable AutoScale in your XMPro configuration and will gracefully fall back to single-server operation when disabled.</p>
<h2 id="how-is-redis-used-by-the-products">How is Redis used by the Products</h2>
<table>
<thead>
<tr>
<th>Product</th>
<th>Redis Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AD</strong></td>
<td>Full (Cache + SignalR)</td>
</tr>
<tr>
<td><strong>DS</strong></td>
<td>SignalR Only</td>
</tr>
<tr>
<td><strong>SM</strong></td>
<td>Legacy SignalR</td>
</tr>
<tr>
<td><strong>SH</strong></td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="what-data-is-stored-in-redis">What Data is Stored in Redis?</h2>
<h3 id="1-data-stream-and-application-live-data-caching">1. Data Stream and Application Live Data Caching</h3>
<ul>
<li><strong>Purpose</strong>: Caches real-time Data Stream sent by the <a href="https://xmpro.gitbook.io/xmpro-app/">XMPro App Agent</a> to the App Designer via <a href="https://xmpro.gitbook.io/data-streams-connector/">Data Streams Connector</a> Data Source. This allows preserving of temporary data even if the App Designer server restarts and avoid consuming the server's memory.</li>
<li><strong>Structure</strong>: Key Values are stored in the Redis Cache as a mix of Hash and List types.</li>
<li><strong>Key Format</strong>: Groups of Keys are created for each Connection created with the <strong>Data Streams Connector</strong>. Keys are prefixed to indicate their grouping.
<ul>
<li><code>DS:&lt;AD Connection Id&gt;-&lt;DS Stream Object Id&gt;:*</code></li>
</ul>
</li>
</ul>
<h3 id="2-signalr-backplane">2. SignalR Backplane</h3>
<ul>
<li><strong>Purpose</strong>: Enables SignalR message distribution across multiple server instances. SignalR is used to send real time data between XMPro Products like Database changes or Notifications. This ensures that when one server instance receives a message, all other instances are automatically notified, keeping users connected to different servers synchronized with the same real-time information.</li>
</ul>
<h2 id="redis-capacity-management-on-xmpro-level">Redis Capacity Management on XMPro Level</h2>
<p>The <a href="https://xmpro.gitbook.io/xmpro-app/how-to-use/configuration-guide#server">XMPro App Agent</a> and <a href="https://xmpro.gitbook.io/data-streams-connector/how-to-use/configuration#cache">Data Streams Connector</a> provides a configuration on how data is stored in the Cache, Cache Size limits, Sliding Expiry, and Cache Clearing.</p>
<ol>
<li><p><strong>Cache Size Limits</strong>:</p>
<ul>
<li>XMPro implements its own cache size management via the Agent and Connector</li>
<li>When inserting new items that exceed the configured cache size, oldest items are removed to give way to new data</li>
</ul>
</li>
<li><p><strong>Sliding Expiration</strong>:</p>
<ul>
<li>Cache items have configurable sliding expiration times</li>
<li>Items are automatically removed by Redis after expiration</li>
<li>Expiration is refreshed on access to keep frequently used data in cache</li>
</ul>
</li>
<li><p><strong>Cache Clearing</strong>:</p>
<ul>
<li>Cache items can be cleared via the XMPro App Agent</li>
<li>Only data related to that XMPro App Agent is cleared</li>
</ul>
</li>
</ol>
<h2 id="impact-when-capacity-is-reached-on-a-redis-server-level">Impact When Capacity is Reached on a Redis Server Level</h2>
<h3 id="application-behavior">Application Behavior</h3>
<ol>
<li><p><strong>Graceful Degradation</strong>:</p>
<ul>
<li>Applications continue to function without Redis</li>
<li>Falls back to database queries when cache is unavailable</li>
</ul>
</li>
<li><p><strong>Performance Impact</strong>:</p>
<ul>
<li>Increased database load as cache misses increase</li>
<li>Slower response times for data retrieval</li>
<li>Potential for increased latency in real-time data updates</li>
</ul>
</li>
<li><p><strong>Data Consistency</strong>:</p>
<ul>
<li>No data loss - Redis is used only for caching</li>
<li>Source data remains in SQL databases</li>
<li>Cache can be rebuilt from source data</li>
</ul>
</li>
<li><p><strong>Data Streams Connector</strong></p>
<ul>
<li>Possible data loss for the cached values displayed on the Application</li>
<li>Depending on the Redis Memory Policy, new data will not come in or old data is removed for the Application</li>
</ul>
</li>
</ol>
<h3 id="redis-memory-policies-redis-service-configuration">Redis Memory Policies (Redis Service Configuration)</h3>
<p>These policies are configured during Redis service setup. They determine how Redis handles memory limits and what happens when the server reaches its maximum memory capacity. Redis server typically uses:</p>
<ul>
<li><strong>Default Policy</strong>: <code>noeviction</code> - Returns errors when memory limit reached</li>
<li><strong>Recommended</strong>: <code>allkeys-lru</code> - Evicts least recently used keys</li>
<li><strong>Alternative</strong>: <code>volatile-lru</code> - Evicts LRU keys with expiration set</li>
</ul>
<h2 id="configuration-and-setup">Configuration and Setup</h2>
<h3 id="connection-configuration">Connection Configuration</h3>
<ul>
<li>Redis connection is configured via connection strings</li>
<li>Supports both standard Redis and Azure Redis Cache</li>
<li>Connection multiplexer is registered as a singleton for connection pooling</li>
</ul>
<h2 id="best-practices-and-recommendations">Best Practices and Recommendations</h2>
<h3 id="1-monitor-redis-memory-usage">1. Monitor Redis Memory Usage</h3>
<ul>
<li>Set up monitoring for Redis memory consumption</li>
<li>Configure alerts before reaching capacity</li>
<li>Plan for Redis scaling based on data volume</li>
</ul>
<h3 id="2-configure-appropriate-eviction-policies">2. Configure Appropriate Eviction Policies</h3>
<ul>
<li>Set Redis <code>maxmemory-policy</code> to <code>allkeys-lru</code> for cache scenarios</li>
<li>Configure <code>maxmemory</code> limit based on available resources</li>
<li>Consider Redis clustering for high-volume deployments</li>
</ul>
<h3 id="3-cache-size-configuration">3. Cache Size Configuration</h3>
<ul>
<li>Adjust entity cache sizes based on data patterns</li>
<li>Balance between memory usage and cache hit rates</li>
<li>Monitor cache effectiveness and adjust limits accordingly</li>
</ul>
<h3 id="4-high-availability">4. High Availability</h3>
<ul>
<li>Use Redis persistence for critical cache data</li>
<li>Implement Redis replication for failover</li>
<li>Consider Redis Sentinel or Cluster for production</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>When Autoscaling is enabled, Redis connection can be checked using the XMPro Health check URL</p>
<h3 id="common-issues">Common Issues</h3>
<ol>
<li><strong>Connection Failures</strong>: Check Redis server availability and connection strings via the Health Check Url or directly on the Server</li>
<li><strong>Memory Errors</strong>: Monitor Redis memory usage and eviction statistics</li>
<li><strong>Performance Degradation</strong>: Review cache hit/miss ratios and adjust cache sizes</li>
</ol>
<h3 id="diagnostic-commands">Diagnostic Commands</h3>
<pre><code class="lang-bash"># Check Redis memory usage
redis-cli INFO memory

# Monitor evicted keys
redis-cli INFO stats | grep evicted

# View current memory policy
redis-cli CONFIG GET maxmemory-policy
</code></pre>
<h2 id="summary">Summary</h2>
<p>Redis in XMPro serves as a performance optimization layer, not a critical data store. The system is designed to handle Redis capacity issues gracefully, with automatic eviction of old data and fallback mechanisms. Proper configuration and monitoring of Redis memory usage is essential for optimal performance.</p>


  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: August 05, 2025</em></small></p>
  </div>
</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright © 2025 XMPro. All rights reserved.
        </div>
      </div>
    </footer>
  </body>
</html>
