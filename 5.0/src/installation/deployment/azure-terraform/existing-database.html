<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Using Existing Database with XMPro Terraform Deployment | XMPro </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Using Existing Database with XMPro Terraform Deployment | XMPro ">
      <meta name="description" content="XMPro official documentation - Learn how to use XMPro&#39;s intelligent digital twin suite for real-time operational intelligence and automated decision-making.">
      
      <link rel="icon" href="../../../../images/favicon.png">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://xmpro.visualstudio.com/XMPro%20Development/_git/xmpro-development?path=docs/src/installation/deployment/azure-terraform/existing-database.md&amp;version=GBmain&amp;line=1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../images/logo-light.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="using-existing-database-with-xmpro-terraform-deployment">Using Existing Database with XMPro Terraform Deployment</h1>

<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#decision-flow">Decision Flow</a></li>
<li><a href="#before-you-begin">Before You Begin</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#configuration-guide">Configuration Guide</a></li>
<li><a href="#deployment-process">Deployment Process</a></li>
<li><a href="#post-deployment-setup">Post-Deployment Setup</a></li>
<li><a href="#behavior-changes">Behavior Changes</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#support">Support</a></li>
</ul>
<h2 id="overview">Overview</h2>
<h3 id="what-this-feature-does">What This Feature Does</h3>
<p>The XMPro Azure Terraform module enables you to deploy applications that connect to existing SQL Server databases instead of creating new ones. This capability is controlled by the <code>use_existing_database</code> Terraform variable.</p>
<h3 id="why-use-this-feature">Why Use This Feature</h3>
<ul>
<li><strong>Version Upgrades</strong>: Migrate between XMPro versions while preserving your data</li>
<li><strong>Development Environments</strong>: Maintain persistent data across deployments</li>
<li><strong>Disaster Recovery</strong>: Restore applications with existing data quickly</li>
<li><strong>Staged Deployments</strong>: Separate database and application lifecycles</li>
</ul>
<h3 id="how-it-works">How It Works</h3>
<ol>
<li>You provide connection details to your existing SQL Server</li>
<li>Terraform skips database creation but still creates all application infrastructure</li>
<li>Applications connect to your existing databases with preserved data</li>
<li>Database schemas are updated automatically for the new version</li>
</ol>
<h2 id="decision-flow">Decision Flow</h2>
<p><strong>Is this feature right for you?</strong></p>
<p>‚úÖ <strong>Use This Feature If:</strong></p>
<ul>
<li>You're upgrading from an older XMPro version</li>
<li>You want to preserve existing data during redeployment</li>
<li>You're restoring after infrastructure failure</li>
<li>You need to maintain data continuity</li>
</ul>
<p>‚ùå <strong>Don't Use This Feature If:</strong></p>
<ul>
<li>This is a fresh production installation</li>
<li>You're setting up a multi-tenant environment</li>
<li>You want completely isolated databases</li>
</ul>
<h2 id="before-you-begin">Before You Begin</h2>
<blockquote>
<p>üö® <strong>CRITICAL</strong>: Complete all prerequisites before starting deployment</p>
</blockquote>
<h3 id="-required-resources-checklist">‚úì Required Resources Checklist</h3>
<ul>
<li><p><strong>Existing SQL Server</strong> with these databases:</p>
<ul>
<li><code>AD</code> - Application Designer database</li>
<li><code>DS</code> - Data Stream Designer database</li>
<li><code>SM</code> - Subscription Manager database</li>
<li><code>AI</code> - AI Services database (optional)</li>
</ul>
</li>
<li><p><strong>Network Access</strong> between Azure and your SQL Server</p>
</li>
<li><p><strong>Admin Credentials</strong> for your SQL Server</p>
</li>
</ul>
<h3 id="-required-information-checklist">‚úì Required Information Checklist</h3>
<ul>
<li><strong>SQL Server FQDN</strong> (e.g., <code>server.database.windows.net</code>)</li>
<li><strong>Product IDs and Keys</strong> from your existing installation</li>
<li><strong>Database admin username and password</strong></li>
<li><strong>Azure subscription access</strong> for Terraform deployment</li>
</ul>
<h3 id="-access--permissions-checklist">‚úì Access &amp; Permissions Checklist</h3>
<ul>
<li><strong>Terraform permissions</strong> on target Azure subscription</li>
<li><strong>Key Vault access</strong> for secret management</li>
<li><strong>Site admin access</strong> to existing SM application</li>
</ul>
<h3 id="how-to-retrieve-product-ids-and-keys">How to Retrieve Product IDs and Keys</h3>
<p><strong>‚è±Ô∏è Time Required</strong>: 10 minutes</p>
<p>These values are essential for connecting your new deployment to existing licenses and configurations.</p>
<h4 id="step-1-access-your-current-subscription-manager">Step 1: Access Your Current Subscription Manager</h4>
<ol>
<li><p><strong>Navigate to your existing SM URL</strong></p>
<ul>
<li>Open your web browser</li>
<li>Go to your current SM installation</li>
<li>Log in with site admin credentials</li>
</ul>
<p><img src="../../../images/existing-database/sm-login.png" alt="SM Login Page">
<em>Figure 1: XMPro Subscription Manager Home page interface</em></p>
</li>
</ol>
<h4 id="step-2-navigate-to-product-management">Step 2: Navigate to Product Management</h4>
<ol start="2">
<li><p><strong>Find the Products section</strong></p>
<ul>
<li>Look for <strong>Products</strong> in the navigation menu</li>
<li>Click <strong>Products</strong> to view registered applications</li>
</ul>
<p><img src="../../../images/existing-database/sm-product-menu.png" alt="SM Products Navigation">
<br>
<em>Figure 2: Navigating to Products section in SM</em></p>
</li>
</ol>
<h4 id="step-3-collect-required-information">Step 3: Collect Required Information</h4>
<p>For each product, you need both <strong>Product ID</strong> and <strong>Product Key</strong>:</p>
<p><img src="../../../images/existing-database/sm-product-list.png" alt="SM Products List">
<em>Figure 3: Products list showing all registered applications</em></p>
<p><strong>Application Designer (AD)</strong>:</p>
<ul>
<li>Click <strong>Application Designer</strong> product</li>
<li>Copy <strong>Product ID</strong> ‚Üí use for <code>existing_ad_product_id</code></li>
<li>Copy <strong>Product Key</strong> ‚Üí use for <code>existing_ad_product_key</code></li>
</ul>
<p><img src="../../../images/existing-database/ad-product-details.png" alt="AD Product Details">
<em>Figure 4: Application Designer product details showing Product ID and Product Key</em></p>
<p><strong>Data Stream Designer (DS)</strong>:</p>
<ul>
<li>Click <strong>Data Stream Designer</strong> product</li>
<li>Copy <strong>Product ID</strong> ‚Üí use for <code>existing_ds_product_id</code></li>
<li>Copy <strong>Product Key</strong> ‚Üí use for <code>existing_ds_product_key</code></li>
</ul>
<p><img src="../../../images/existing-database/ds-product-details.png" alt="DS Product Details">
<em>Figure 5: Data Stream Designer product details showing Product ID and Product Key</em></p>
<p><strong>Subscription Manager (SM)</strong>:</p>
<ul>
<li>Click <strong>Subscription Manager</strong> product</li>
<li>Copy <strong>Product ID</strong> ‚Üí use for <code>existing_sm_product_id</code></li>
</ul>
<p><img src="../../../images/existing-database/sm-product-details.png" alt="SM Product Details">
<em>Figure 6: Subscription Manager product details showing Product ID</em></p>
<p><strong>AI Designer (AI)</strong> <em>(Optional)</em>:</p>
<ul>
<li>Click <strong>AI Designer</strong> (if present)</li>
<li>Copy <strong>Product ID</strong> ‚Üí use for <code>existing_ai_product_id</code></li>
<li>Copy <strong>Product Key</strong> ‚Üí use for <code>existing_ai_product_key</code></li>
</ul>
<p><img src="../../../images/existing-database/ai-product-details.png" alt="AI Product Details">
<em>Figure 7: AI Designer product details showing Product ID and Product Key (optional)</em></p>
<blockquote>
<p>üí° <strong>TIP</strong>: Screenshot placeholder: AD Product details page showing Product ID and Product Key fields</p>
</blockquote>
<h4 id="step-4-save-information-securely">Step 4: Save Information Securely</h4>
<ul>
<li>Keep these values readily available for configuration</li>
<li>Store them securely - they're linked to your licensing system</li>
</ul>
<blockquote>
<p>‚ÑπÔ∏è <strong>NOTE</strong>: Product IDs and Keys are unique identifiers that ensure seamless migration without licensing issues.</p>
</blockquote>
<h2 id="quick-start">Quick Start</h2>
<p><strong>‚è±Ô∏è Total Time</strong>: 30 minutes (15 min deployment + 15 min configuration)</p>
<p><strong>What You'll Accomplish</strong>: Deploy new XMPro applications connected to your existing databases</p>
<h3 id="step-1-prepare-configuration-5-minutes">Step 1: Prepare Configuration (5 minutes)</h3>
<p>Create your <code>terraform.tfvars</code> file with existing database settings:</p>
<pre><code># Core Settings
use_existing_database = true
existing_sql_server_fqdn = &quot;xmpro-prod-sql.database.windows.net&quot;

# Authentication (optional if using same credentials)
# db_admin_username = &quot;sqladmin&quot;
# db_admin_password = &quot;SecureP@ssw0rd123!&quot;

# Product IDs from your existing installation
existing_sm_product_id = &quot;f47ac10b-58cc-4372-a567-0e02b2c3d479&quot;  # Replace with your SM Product ID
existing_ad_product_id = &quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;  # Replace with your AD Product ID
existing_ds_product_id = &quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;  # Replace with your DS Product ID
existing_ai_product_id = &quot;6ba7b812-9dad-11d1-80b4-00c04fd430c8&quot;  # Optional

# Product Keys from your existing installation
existing_ad_product_key = &quot;550e8400-e29b-41d4-a716-446655440000&quot;  # Replace with your AD Product Key
existing_ds_product_key = &quot;550e8400-e29b-41d4-a716-446655440001&quot;  # Replace with your DS Product Key
existing_ai_product_key = &quot;550e8400-e29b-41d4-a716-446655440002&quot;  # Optional
</code></pre>
<blockquote>
<p>‚ö†Ô∏è <strong>IMPORTANT</strong>: Replace example values with your actual Product IDs and Keys from Step 3 above.</p>
</blockquote>
<h3 id="step-2-deploy-infrastructure-10-minutes">Step 2: Deploy Infrastructure (10 minutes)</h3>
<pre><code class="lang-bash">terraform init
terraform apply
</code></pre>
<p><strong>What to expect</strong>:</p>
<ul>
<li>Deployment takes 10-15 minutes</li>
<li>No new databases will be created</li>
<li>Applications may show errors initially (normal)</li>
<li>Save the output URLs for next step</li>
</ul>
<h3 id="step-3-update-product-urls-10-minutes">Step 3: Update Product URLs (10 minutes)</h3>
<ol>
<li><strong>Log into your old SM application</strong></li>
<li><strong>Navigate to Products section</strong></li>
<li><strong>Update each product's URL</strong> with new Terraform outputs</li>
<li><strong>Restart SM App Service</strong> in Azure Portal</li>
<li><strong>Test application access</strong></li>
</ol>
<h3 id="step-4-verify-success-5-minutes">Step 4: Verify Success (5 minutes)</h3>
<p>‚úÖ All applications load without errors<br>
‚úÖ Login/logout works correctly<br>
‚úÖ Data from existing databases is accessible<br>
‚úÖ Navigation between applications works</p>
<p><strong>Need detailed steps?</strong> ‚Üí Continue to <a href="#configuration-guide">Configuration Guide</a></p>
<h2 id="configuration-guide">Configuration Guide</h2>
<h3 id="core-configuration-variables">Core Configuration Variables</h3>
<h4 id="essential-settings">Essential Settings</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>use_existing_database</code></td>
<td><code>true</code></td>
<td>Enables existing database mode</td>
</tr>
<tr>
<td><code>existing_sql_server_fqdn</code></td>
<td><code>&quot;server.database.windows.net&quot;</code></td>
<td>Your SQL Server's full domain name</td>
</tr>
</tbody>
</table>
<h4 id="authentication-settings-optional">Authentication Settings (Optional)</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>db_admin_username</code></td>
<td><code>&quot;sqladmin&quot;</code></td>
<td>Database admin username</td>
</tr>
<tr>
<td><code>db_admin_password</code></td>
<td><code>&quot;SecureP@ssw0rd123!&quot;</code></td>
<td>Database admin password</td>
</tr>
</tbody>
</table>
<blockquote>
<p>‚ÑπÔ∏è <strong>NOTE</strong>: If not specified, uses existing credentials from your setup.</p>
</blockquote>
<h4 id="product-id-configuration">Product ID Configuration</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>existing_sm_product_id</code></td>
<td>‚úÖ Yes</td>
<td>SM Product ID from existing installation</td>
</tr>
<tr>
<td><code>existing_ad_product_id</code></td>
<td>‚úÖ Yes</td>
<td>AD Product ID from existing installation</td>
</tr>
<tr>
<td><code>existing_ds_product_id</code></td>
<td>‚úÖ Yes</td>
<td>DS Product ID from existing installation</td>
</tr>
<tr>
<td><code>existing_ai_product_id</code></td>
<td>‚ö™ Optional</td>
<td>AI Product ID (if using AI services)</td>
</tr>
</tbody>
</table>
<h4 id="product-key-configuration">Product Key Configuration</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>existing_ad_product_key</code></td>
<td>‚úÖ Yes</td>
<td>AD Product Key from existing installation</td>
</tr>
<tr>
<td><code>existing_ds_product_key</code></td>
<td>‚úÖ Yes</td>
<td>DS Product Key from existing installation</td>
</tr>
<tr>
<td><code>existing_ai_product_key</code></td>
<td>‚ö™ Optional</td>
<td>AI Product Key (if using AI services)</td>
</tr>
</tbody>
</table>
<h4 id="network-settings">Network Settings</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>db_allow_all_ips</code></td>
<td><code>false</code></td>
<td>Allow all IP addresses to connect</td>
</tr>
</tbody>
</table>
<h3 id="complete-configuration-example">Complete Configuration Example</h3>
<pre><code># Basic deployment settings
company_name = &quot;acme&quot;
environment  = &quot;prod&quot;
location     = &quot;East US&quot;

# Existing database configuration
use_existing_database    = true
existing_sql_server_fqdn = &quot;acme-prod-sql.database.windows.net&quot;

# Product IDs from existing installation
existing_sm_product_id = &quot;f47ac10b-58cc-4372-a567-0e02b2c3d479&quot;  # From SM ‚Üí Products ‚Üí Subscription Manager
existing_ad_product_id = &quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;  # From SM ‚Üí Products ‚Üí Application Designer
existing_ds_product_id = &quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;  # From SM ‚Üí Products ‚Üí Data Stream Designer
existing_ai_product_id = &quot;6ba7b812-9dad-11d1-80b4-00c04fd430c8&quot;  # From SM ‚Üí Products ‚Üí AI Designer

# Product Keys from existing installation
existing_ad_product_key = &quot;550e8400-e29b-41d4-a716-446655440000&quot;  # From SM ‚Üí Products ‚Üí Application Designer
existing_ds_product_key = &quot;550e8400-e29b-41d4-a716-446655440001&quot;  # From SM ‚Üí Products ‚Üí Data Stream Designer
existing_ai_product_key = &quot;550e8400-e29b-41d4-a716-446655440002&quot;  # From SM ‚Üí Products ‚Üí AI Designer
</code></pre>
<blockquote>
<p>‚ÑπÔ∏è <strong>NOTE</strong>: Replace example values with your actual configuration details.</p>
</blockquote>
<h2 id="deployment-process">Deployment Process</h2>
<h3 id="phase-1-pre-deployment-validation-10-minutes">Phase 1: Pre-Deployment Validation (10 minutes)</h3>
<h4 id="verify-azure-resources">Verify Azure Resources</h4>
<ol>
<li><p><strong>Navigate to Azure Portal</strong></p>
<ul>
<li>Open <a href="https://portal.azure.com">https://portal.azure.com</a></li>
<li>Sign in with subscription access</li>
</ul>
</li>
<li><p><strong>Locate Your SQL Server</strong></p>
<ul>
<li>Search for &quot;SQL servers&quot;</li>
<li>Find your existing SQL Server</li>
<li>Copy the <strong>Server name (FQDN)</strong></li>
</ul>
</li>
<li><p><strong>Verify Required Databases</strong></p>
<ul>
<li>Check databases section on SQL Server overview</li>
<li>Confirm these databases exist:
<ul>
<li><code>AD</code> (App Designer)</li>
<li><code>DS</code> (Data Stream Designer)</li>
<li><code>SM</code> (Subscription Manager)</li>
<li><code>AI</code> (Optional - AI Services)</li>
</ul>
</li>
</ul>
<blockquote>
<p>üö® <strong>CRITICAL</strong>: Database names must match exactly. Different naming conventions will not work.</p>
</blockquote>
</li>
<li><p><strong>Test Database Connectivity</strong></p>
<ul>
<li>Verify databases are &quot;Online&quot;</li>
<li>Confirm admin credentials are correct</li>
<li>Reset password if needed via Azure Portal</li>
</ul>
</li>
</ol>
<h3 id="phase-2-infrastructure-deployment-15-minutes">Phase 2: Infrastructure Deployment (15 minutes)</h3>
<h4 id="deploy-using-example-module">Deploy Using Example Module</h4>
<ol>
<li><p><strong>Get the Code</strong></p>
<pre><code class="lang-bash">git clone https://github.com/XMPro/terraform-xmpro-azure.git
cd terraform-xmpro-azure/examples/existing-database
</code></pre>
</li>
<li><p><strong>Configure Variables</strong></p>
<ul>
<li>Create <code>terraform.tfvars</code> based on examples above</li>
<li>Replace all placeholder values with your actual data</li>
</ul>
</li>
<li><p><strong>Deploy Infrastructure</strong></p>
<pre><code class="lang-bash">terraform init
terraform apply
</code></pre>
<p><strong>During deployment, verify the plan shows</strong>:</p>
<ul>
<li>‚úÖ No SQL Server creation</li>
<li>‚úÖ No database creation</li>
<li>‚úÖ App Services will be created</li>
<li>‚úÖ Key Vault and supporting resources</li>
</ul>
</li>
<li><p><strong>Monitor Progress</strong></p>
<ul>
<li>Deployment takes 10-15 minutes</li>
<li>Applications may show errors initially (expected)</li>
<li>Save output values for post-deployment setup</li>
</ul>
</li>
</ol>
<h3 id="phase-3-deployment-verification-5-minutes">Phase 3: Deployment Verification (5 minutes)</h3>
<h4 id="check-terraform-outputs">Check Terraform Outputs</h4>
<p>Run <code>terraform output</code> and save these values:</p>
<ul>
<li><code>ad_url</code> - Application Designer URL</li>
<li><code>ds_url</code> - Data Stream Designer URL</li>
<li><code>sm_url</code> - Subscription Manager URL</li>
<li><code>resource_group_name</code> - New resource group name</li>
</ul>
<h4 id="verify-azure-resources-1">Verify Azure Resources</h4>
<p>Navigate to the new resource group and confirm:</p>
<ul>
<li>‚úÖ App Services for AD, DS, SM (and AI if configured)</li>
<li>‚úÖ App Service Plans</li>
<li>‚úÖ Key Vault</li>
<li>‚úÖ Storage Account</li>
<li>‚úÖ Application Insights</li>
<li>‚úÖ No SQL Server or databases (confirms existing database mode)</li>
</ul>
<blockquote>
<p>‚ÑπÔ∏è <strong>NOTE</strong>: Applications will show errors until post-deployment setup is complete.</p>
</blockquote>
<h2 id="post-deployment-setup">Post-Deployment Setup</h2>
<blockquote>
<p>üö® <strong>CRITICAL</strong>: These steps are required for applications to function properly.</p>
</blockquote>
<p><strong>‚è±Ô∏è Time Required</strong>: 15 minutes</p>
<h3 id="when-manual-setup-is-required">When Manual Setup Is Required</h3>
<blockquote>
<p>‚ö†Ô∏è <strong>IMPORTANT</strong>: Manual setup is only needed if your new deployment will use different URLs than your existing installation. If using the same URLs, skip this section.</p>
</blockquote>
<h3 id="step-1-update-product-urls-10-minutes">Step 1: Update Product URLs (10 minutes)</h3>
<h4 id="access-subscription-manager">Access Subscription Manager</h4>
<ol>
<li><strong>Navigate to your OLD SM URL</strong> (existing installation)</li>
<li><strong>Log in with site admin credentials</strong></li>
<li><strong>Go to Products section</strong></li>
</ol>
<h4 id="update-each-product">Update Each Product</h4>
<p>For <strong>each product</strong> (Application Designer, Data Stream Designer, AI Services):</p>
<ol>
<li><strong>Click the product name</strong> to edit settings</li>
<li><strong>Update Product URL field</strong>:
<ul>
<li><strong>App Designer</strong>: Use your new <code>ad_url</code> output</li>
<li><strong>Data Stream Designer</strong>: Use your new <code>ds_url</code> output</li>
<li><strong>AI Services</strong>: Use your new <code>ai_url</code> output (if applicable)</li>
</ul>
</li>
<li><strong>Update Logout URL field</strong>:
<ul>
<li>Format: <code>https://your-new-sm-url.azurewebsites.net/Account/Logout</code></li>
<li>Replace with your actual new SM URL</li>
</ul>
</li>
<li><strong>Save changes</strong></li>
</ol>
<p><img src="../../../images/existing-database/product-logout-url-update.png" alt="Product Logout URL Update">
<img src="../../../images/existing-database/product-url-update.png" alt="Product URL Update">
<em>Figure 8: Updating Product URL and Logout URL fields for existing products</em></p>
<h3 id="step-2-restart-application-services-3-minutes">Step 2: Restart Application Services (3 minutes)</h3>
<ol>
<li><strong>Navigate to Azure Portal ‚Üí App Services</strong></li>
<li><strong>Find your new SM App Service</strong>
<ul>
<li>Name format: <code>app-sm-&lt;company&gt;-&lt;environment&gt;-&lt;suffix&gt;</code></li>
</ul>
</li>
<li><strong>Click Restart</strong> from the toolbar</li>
<li><strong>Wait 2-3 minutes</strong> for full restart</li>
</ol>
<h3 id="step-3-verify-functionality-2-minutes">Step 3: Verify Functionality (2 minutes)</h3>
<h4 id="test-application-access">Test Application Access</h4>
<p>‚úÖ <strong>Subscription Manager</strong>: Navigate to new SM URL, verify login<br>
‚úÖ <strong>Application Designer</strong>: Click AD icon from SM or navigate directly<br>
‚úÖ <strong>Data Stream Designer</strong>: Click DS icon from SM or navigate directly<br>
‚úÖ <strong>Navigation</strong>: Test links between applications work</p>
<h4 id="test-key-features">Test Key Features</h4>
<p>‚úÖ <strong>Authentication</strong>: Login and logout functions properly<br>
‚úÖ <strong>Data Access</strong>: Existing database data is accessible<br>
‚úÖ <strong>User Permissions</strong>: Existing roles and permissions intact</p>
<h2 id="behavior-changes">Behavior Changes</h2>
<h3 id="what-gets-skipped-">What Gets Skipped ‚è≠Ô∏è</h3>
<ul>
<li><strong>SQL Server Creation</strong>: Uses your existing SQL Server</li>
<li><strong>Database Creation</strong>: Uses your existing databases</li>
<li><strong>Licenses Container</strong>: Automatic license setup is skipped</li>
</ul>
<h3 id="what-still-happens-">What Still Happens ‚úÖ</h3>
<ul>
<li><strong>Database Schema Updates</strong>: Migration containers run to update schemas for the new version</li>
<li><strong>App Services</strong>: All application containers are created</li>
<li><strong>Infrastructure</strong>: Key Vault, Storage, monitoring resources are created</li>
<li><strong>Container Services</strong>: Stream Host and supporting containers are deployed</li>
</ul>
<blockquote>
<p>üö® <strong>CRITICAL</strong>: Database migration containers (<code>sm-dbmigrate</code>, <code>ad-dbmigrate</code>, <code>ds-dbmigrate</code>, <code>ai-dbmigrate</code>) will run to ensure your existing databases are updated with any schema changes from the new version. This is essential for version upgrades.</p>
</blockquote>
<blockquote>
<p>‚ö†Ô∏è <strong>IMPORTANT</strong>: When the licenses container is skipped, you must manage licensing manually. Ensure your existing database contains valid license information, or configure licensing through the SM application after deployment.</p>
</blockquote>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues-decision-tree">Common Issues Decision Tree</h3>
<p><strong>Problem</strong>: SM shows default XMPro page instead of login</p>
<p><strong>Possible Cause</strong>: ServerUUID mismatch</p>
<ul>
<li>‚úÖ <strong>Check</strong>: ServerUUID in Key Vault matches ProductId in database</li>
<li>‚úÖ <strong>Fix</strong>: Run query <code>SELECT ProductId FROM [dbo].[Products] WHERE [Name]='XMPRO'</code></li>
<li>‚úÖ <strong>Update</strong>: Key Vault ServerUUID with correct ProductId</li>
</ul>
<p><strong>Problem</strong>: Applications show &quot;Database Connection Error&quot;</p>
<p><strong>Possible Causes</strong>: Connection or credential issues</p>
<ul>
<li>‚úÖ <strong>Check</strong>: Connection strings use correct FQDN</li>
<li>‚úÖ <strong>Check</strong>: Databases are online and accessible</li>
<li>‚úÖ <strong>Check</strong>: Admin credentials have sufficient permissions</li>
</ul>
<p><strong>Problem</strong>: Applications won't start or show 500 errors</p>
<p><strong>Possible Causes</strong>: Configuration or network issues</p>
<ul>
<li>‚úÖ <strong>Check</strong>: All required databases exist with correct names</li>
<li>‚úÖ <strong>Check</strong>: Firewall rules allow Azure service connections</li>
<li>‚úÖ <strong>Check</strong>: Product IDs and Keys are correct</li>
</ul>
<h3 id="detailed-solutions">Detailed Solutions</h3>
<h4 id="serveruuid-configuration-issues">ServerUUID Configuration Issues</h4>
<p><strong>Symptoms</strong>: Default XMPro page instead of login interface</p>
<p><strong>Solution Steps</strong>:</p>
<ol>
<li>Connect to your SM database</li>
<li>Run: <code>SELECT ProductId FROM [dbo].[Products] WHERE [Name]='XMPRO'</code></li>
<li>Copy the ProductId result</li>
<li>Navigate to Key Vault in Azure Portal</li>
<li>Update ServerUUID secret with the ProductId value</li>
<li>Restart SM App Service</li>
</ol>
<h4 id="database-connection-problems">Database Connection Problems</h4>
<p><strong>Symptoms</strong>: 500 errors or connection failures</p>
<p><strong>Solution Steps</strong>:</p>
<ol>
<li>Verify FQDN in connection strings matches your SQL Server</li>
<li>Check database status in Azure Portal (should be &quot;Online&quot;)</li>
<li>Test connectivity from Azure to your SQL Server</li>
<li>Verify admin credentials are correct</li>
<li>Check firewall rules allow Azure services</li>
</ol>
<h2 id="support">Support</h2>
<h3 id="getting-help">Getting Help</h3>
<p><strong>Check Application Logs</strong>:</p>
<ul>
<li>Navigate to App Service ‚Üí Monitoring ‚Üí Log stream</li>
<li>Review detailed error messages</li>
</ul>
<p><strong>Review Configuration</strong>:</p>
<ul>
<li>Verify all manual setup steps completed</li>
<li>Double-check Product IDs and Keys match exactly</li>
</ul>
<p><strong>Contact Support</strong>:</p>
<ul>
<li>Gather deployment details and error logs</li>
<li>Include Terraform output and Azure resource information</li>
<li>Contact XMPro support with comprehensive details</li>
</ul>
<h3 id="additional-resources">Additional Resources</h3>
<ul>
<li><a href="https://github.com/XMPro/terraform-xmpro-azure">Main Terraform Module Documentation</a></li>
<li><a href="https://documentation.xmpro.com/4.5/src/installation/deployment/azure-terraform/troubleshooting.html">Azure Terraform Troubleshooting Guide</a></li>
<li><a href="https://support.xmpro.com">XMPro Support Portal</a></li>
</ul>
<hr>
<blockquote>
<p>üí° <strong>Remember</strong>: Using existing databases provides flexibility for migration scenarios but requires careful attention to the manual setup steps for successful deployment.</p>
</blockquote>


  <div class="last-modified">
    <hr />
    <p><small><em>Last modified: August 07, 2025</em></small></p>
  </div>
</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright ¬© 2025 XMPro. All rights reserved.
        </div>
      </div>
    </footer>
  </body>
</html>
